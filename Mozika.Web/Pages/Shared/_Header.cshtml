<!-- Header Container ================================================== -->
<header class="header uk-light">

    <div class="container">
        <nav uk-navbar>

            <!-- left Side Content -->
            <div class="uk-navbar-left">

                <!-- menu icon -->
                <span class="mmenu-trigger" uk-toggle="target: #wrapper ; cls: mobile-active">
                    <button class="hamburger hamburger--collapse" type="button">
                        <span class="hamburger-box">
                            <span class="hamburger-inner"></span>
                        </span>
                    </button>
                </span>


                <!-- logo -->
                <a href="#" class="logo">
                    <img src="~/assets/images/logo-dark.svg" alt="">
                    <span> Mozika.com</span>
                </a>

                <div class="searchbox uk-visible@s">

                    <input class="uk-search-input" type="search" placeholder="Search...">
                    <button class="btn-searchbox"> </button>

                </div>
                <!-- Search box dropdown -->
                <div uk-dropdown="pos: top;mode:click;animation: uk-animation-slide-bottom-small"
                     class="dropdown-search">
                    <div class="erh BR9 MIw"
                         style="top: -26px;position: absolute ; left: 24px;fill: currentColor;height: 24px;pointer-events: none;color: #f5f5f5;">
                        <svg width="22" height="22">
                            <path d="M0 24 L12 12 L24 24"></path>
                        </svg>
                    </div>
                    <!-- User menu -->

                    <ul class="dropdown-search-list">

                        <li class="list-title artist-list">
                            Artiste
                        </li>

                        <li class="list-title album-list">
                            Album
                        </li>
                        <li class="list-title track-list">
                            Track
                        </li>

                    </ul>

                </div>
            </div>


            <!--  Right Side Content   -->

            <div class="uk-navbar-right">



                <div class="header-widget">

                    <!-- notificiation icon  -->

                    <a href="#" class="header-widget-icon"
                       uk-tooltip="title: Notificiation ; pos: bottom ;offset:21">
                        <i class="uil-bell"></i>
                        <span>4</span>
                    </a>

                    <!-- notificiation dropdown -->
                    <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                         class="dropdown-notifications">

                        <!-- notivication header -->
                        <div class="dropdown-notifications-headline">
                            <h4>Notifications </h4>
                            <a href="#">
                                <i class="icon-feather-settings"
                                   uk-tooltip="title: Notifications settings ; pos: left"></i>
                            </a>
                        </div>

                        <!-- notification contents -->
                        <div class="dropdown-notifications-content" data-simplebar>

                            <!-- notiviation list -->
                            <ul>
                                <li class="notifications-not-read">
                                    <a href="#">
                                        <span class="notification-icon btn btn-soft-danger disabled">
                                            <i class="icon-feather-thumbs-up"></i>
                                        </span>
                                        <span class="notification-text">
                                            <strong>Adrian Mohani</strong> Like Your Comment On Course
                                            <span class="text-primary">Javascript Introduction </span>
                                            <br> <span class="time-ago"> 9 hours ago </span>
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="notification-icon btn btn-soft-primary disabled">
                                            <i class="icon-feather-message-circle"></i>
                                        </span>
                                        <span class="notification-text">
                                            <strong>Stella Johnson</strong> Replay Your Comments in
                                            <span class="text-primary">Programming for Games</span>
                                            <br> <span class="time-ago"> 12 hours ago </span>
                                        </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="notification-icon btn btn-soft-success disabled">
                                            <i class="icon-feather-star"></i>
                                        </span>
                                        <span class="notification-text">
                                            <strong>Alex Dolgove</strong> Added New Review In Course
                                            <span class="text-primary">Full Stack PHP Developer</span>
                                            <br> <span class="time-ago"> 19 hours ago </span>
                                        </span>
                                    </a>
                                </li>
                                <li class="notifications-not-read">
                                    <a href="#">
                                        <span class="notification-icon btn btn-soft-danger disabled">
                                            <i class="icon-feather-share-2"></i>
                                        </span>
                                        <span class="notification-text">
                                            <strong>Jonathan Madano</strong> Shared Your Discussion On Course
                                            <span class="text-primary">Css Flex Box </span>
                                            <br> <span class="time-ago"> Yesterday </span>
                                        </span>
                                    </a>
                                </li>
                            </ul>

                        </div>


                    </div>


                    <!-- Message  -->

                    <a href="#" class="header-widget-icon" uk-tooltip="title: Message ; pos: bottom ;offset:21">
                        <i class="uil-envelope-alt"></i>
                        <span>1</span>
                    </a>

                    <!-- Message  notificiation dropdown -->
                    <div uk-dropdown=" pos: top-right;mode:click" class="dropdown-notifications">

                        <!-- notivication header -->
                        <div class="dropdown-notifications-headline">
                            <h4>Messages</h4>
                            <a href="#">
                                <i class="icon-feather-settings"
                                   uk-tooltip="title: Message settings ; pos: left"></i>
                            </a>
                        </div>

                        <!-- notification contents -->
                        <div class="dropdown-notifications-content" data-simplebar>

                            <!-- notiviation list -->
                            <ul>
                                <li class="notifications-not-read">
                                    <a href="#">
                                        <span class="notification-avatar">
                                            <img src="~/assets/images/avatars/avatar-2.jpg" alt="">
                                        </span>
                                        <div class="notification-text notification-msg-text">
                                            <strong>Jonathan Madano</strong>
                                            <p>
                                                Okay.. Thanks for The Answer I will be waiting for your...
                                            </p>
                                            <span class="time-ago"> 2 hours ago </span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="notification-avatar">
                                            <img src="~/assets/images/avatars/avatar-3.jpg" alt="">
                                        </span>
                                        <div class="notification-text notification-msg-text">
                                            <strong>Stella Johnson</strong>
                                            <p>
                                                Alex will explain you how to keep the HTML structure and all
                                                that...
                                            </p>
                                            <span class="time-ago"> 7 hours ago </span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="notification-avatar">
                                            <img src="~/assets/images/avatars/avatar-1.jpg" alt="">
                                        </span>
                                        <div class="notification-text notification-msg-text">
                                            <strong>Alex Dolgove</strong>
                                            <p>
                                                Alia Joseph just joined Messenger! Be the first to send a
                                                welcome message..
                                            </p>
                                            <span class="time-ago"> 19 hours ago </span>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <span class="notification-avatar">
                                            <img src="~/assets/images/avatars/avatar-4.jpg" alt="">
                                        </span>
                                        <div class="notification-text notification-msg-text">
                                            <strong>Adrian Mohani</strong>
                                            <p>
                                                Okay.. Thanks for The Answer I will be waiting for your...
                                            </p>
                                            <span class="time-ago"> Yesterday </span>
                                        </div>
                                    </a>
                                </li>
                            </ul>

                        </div>
                        <div class="dropdown-notifications-footer">
                            <a href="#"> sell all <i class="icon-line-awesome-long-arrow-right"></i> </a>
                        </div>
                    </div>


                    <!-- profile-icon-->

                    <div class="dropdown-user-details" style="cursor:pointer">
                        <div class="dropdown-user-avatar">
                            <img src="~/assets/images/avatars/avatar-2.jpg" alt="">
                        </div>
                        <div class="dropdown-user-name">
                            @if (User.Identity.IsAuthenticated)
                            {
                                @User.Identity.Name
                                <span>connected</span>
                            }
                            else
                            {
                                <b>Invite</b>
                            }

                        </div>
                    </div>


                    <div uk-dropdown="pos: top-right ;mode:click" class="dropdown-notifications small">

                        <!-- User menu -->

                        <ul class="dropdown-user-menu">
                            
                            @if (User.Identity.IsAuthenticated)
                            {
                                <li>
                                    <a href="#">
                                        <i class="icon-material-outline-dashboard"></i> Dashboard
                                    </a>
                                </li>

                                <li>
                                    <a href="#">
                                        <i class="icon-feather-settings"></i> Account Settings
                                    </a>
                                </li>

                            }
                            <ul class="menu-divider">
                                <li>
                                    <a href="#">
                                        <i class="icon-feather-help-circle"></i> Help
                                    </a>
                                </li>
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <li>
                                        <a asp-controller="Account" asp-action="Logout">
                                            <i class="icon-feather-log-out"></i> Sign Out
                                        </a>
                                    </li>
                                }
                            </ul>
                        </ul>


                    </div>


                </div>



                <!-- icon search-->
                <a class="uk-navbar-toggle uk-hidden@s"
                   uk-toggle="target: .nav-overlay; animation: uk-animation-fade" href="#">
                    <i class="uil-search icon-small"></i>
                </a>
                <!-- User icons -->
                <span class="uil-user icon-small uk-hidden@s"
                      uk-toggle="target: .header-widget ; cls: is-active">
                </span>

            </div>
            <!-- End Right Side Content / End -->


        </nav>

    </div>
    <!-- container  / End -->

</header>
<script type="text/javascript">
    function recherche(keyword) {
        $.ajax({

            url: '/Home/SearchValue?param=' + keyword,
            type: 'GET',
            dataType :'json',
            success: function (data) {
                generateLi(data);
            },
            error: function (err) {
                console.log(err);
            }

        });


    }

    function generateLi(data) {
        @* <a asp-page="/Medias/Album/Details" asp-route-playlistId="@playlist.PlaylistId">*@
        JSON.parse(data).forEach(item => {
            var url = "/Medias/" + item.type + "/Details?id="+item.id;
            var li = $('<li/>');
            var aElement = $('<a/>')
                .text(item.libelle)
                .attr("href", url)
                .appendTo(li);
            if (item.type=="Album") {
                $('.album-list').after(li);
            }
            if (item.type == "Track") {
                $('.track-list').after(li);
            }
            if (item.type == "Artist") {
                $('.artist-list').after(li);
            }
        });

    }
    $(".uk-search-input").keyup(delay(function (event) {
        event.preventDefault();
        clearHtml();
        recherche($(this).val());
    }, 300));

    function clearHtml() {
        var trackTitle = $(".track-list");
        var artistTitle = $(".artist-list");
        var albumTitle = $(".album-list");
        $('.dropdown-search-list').empty();
        $('.dropdown-search-list').append(artistTitle);
        $('.dropdown-search-list').append(albumTitle);
        $('.dropdown-search-list').append(trackTitle);

    }
    $('#input').keyup(delay(function (e) {
        console.log('Time elapsed!', this.value);
    }, 500));
    function delay(callback, ms) {
        var timer = 0;
        return function () {
            var context = this, args = arguments;
            clearTimeout(timer);
            timer = setTimeout(function () {
                callback.apply(context, args);
            }, ms || 0);
        };
    }

</script>